<!DOCTYPE html>
    <head>
        <title>Deep Learning</title>
        <link rel="stylesheet" media="screen" href ="static/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>   
        <link href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.css" rel="stylesheet"/>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.js"></script>
    </head>
    <style>
        /* label 和 select 之間的間隔 */
        form label {
            width: 20%;
        }
        .flex-container {
              display: flex;
            }

        .flex-container > div {          
          color: black;          
        }
        a.list-group-item{
            font-size: 24px;
        }
        input {
            float:left;
        }
    </style>
    <body>
        {% include '_navbar.html' %}
        <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
            <div class="flex-container">
                <div style="flex-grow: 1">                
                {% if error %}
                <div class="alert alert-danger">
                <strong>Error:</strong> {{ error }}
                </div>
                {% endif %}
                <h2>YOLO v3</h2>
                    <form action="{{ url_for('view_training') }}" method="post">
                        <!-- <label for="FormControlSelect0">Choose Pretrain Model: </label> -->
                            <select size="30" width=20px name="comp0_select" id="comp0_select" value="comp0_select" onchange="this.form.submit()" class="form-control"  id="FormControlSelect0">
                            {%- for item in tree recursive %}
                                {% if item == dataset  %}
                                    <option selected="selected">{{ dataset }}</option>
                                {% else %}
                                    <option>{{ item }}</option>
                                {%- endif %}
                            {%- endfor %}
                        </select>
                        <br>
                        <input style="display:none" type="submit" class="btn btn-danger" id="delBtn" value="Delete" name="delBtn">
                        <input style="display:none" type="submit" class="btn btn-success" id="cancelBtn" value="Cancel" name="cancelBtn">
                    </form>
                    <br>                  
                    <input type="button" class="btn btn-primary" id="edit" value="Edit" name="btn" onclick="create_delBtn()">
                    <form action="{{ url_for('view_training') }}" method="post">
                        
                    </form>
                </div>
               
                <!-- <button type="submit" class="btn btn-primary" id="edit_btn" name="edit_btn" value="edit_btn">Edit</button> -->
                <div style="flex-grow:2">
                    <br>
                    <br>
                    <br>
                    <br>
                    <div id="mychart"></div>
                    <div id="mychart2"></div>
                </div>
            </div>  
        </main>
    </body>
    <script>
        filepath = document.getElementById('comp0_select').value
        var file = 'static/task/'+filepath+'/AvgLoss.json'
        $.getJSON(file, function (externaldata) {
            var chart = c3.generate({
                title: {
                    text:'External JSON loading via C3.js'
                },
                bindto: '#mychart',
                data: {
                json: externaldata,
                    type: 'area-spline',
                }
            });
        })
        var file2 = 'static/task/'+filepath+'/IOU.json'
        $.getJSON(file2, function (externaldata2) {
            var chart = c3.generate({
                bindto: '#mychart2',
                data: {
                json: externaldata2,
                    type: 'area-spline',
                }
            });
        })
        function create_delBtn(){
            document.getElementById("delBtn").style.display = "block";
            document.getElementById("cancelBtn").style.display = "block";
            document.getElementById("edit").style.display = "none";
            var select_0 = document.getElementById("comp0_select");
            select_0.onchange = NaN;
            select_0.multiple = true;
        }
        // $("input").click(function(){
        //     $(this).toggleClass('btn btn-primary btn btn-danger');    
        // });
      
        // function change_btn() {            
        //     var btn = document.getElementById("edit");
        //     var select_0 = document.getElementById("comp0_select");
        //     if (btn.value === "Edit") {
        //         btn.value = "Delete";
        //         select_0.onchange = NaN;
        //     } else {
        //         btn.value = "Edit";
        //     }
        // } 
    </script>
</html>
<!DOCTYPE html>
    <head>
            <title>Deep Learning</title>
            <link rel="stylesheet" href="static/bootstrap-theme.min.css">
            <link rel="stylesheet" href="static/bootstrap.min.css">
            <meta name="viewport" content = "width=device-width, initial-scale=1.0">        
            <link rel="stylesheet" href="static/jquery.min.js">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    
            <link href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.css" rel="stylesheet" />    
            <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.js"></script>
            <script src="static/papaparse.min.js"></script>
    </head>
    {% include '_navbar.html' %}
    <body>
        
        <div class="container">
            <h2>YOLO v3</h2>
            {% if error %}
            <div class="alert alert-danger">
            <strong>Error:</strong> {{ error }}        
            </div>
            {% endif %}
            <form action="{{ url_for('view_training') }}" method="post">  
                <div class="form-group">
                    <label for="FormControlSelect0">Choose Pretrain Model: </label>
                    <select size="{{size_d}}" name="form_1" id="comp0_select" value="comp0_select" onchange="this.form.submit()" class="form-control" id="FormControlSelect0">
                        {%- for item in tree recursive %}
                            {% if item == dataset  %}
                                <option selected="selected">{{ dataset }}</option>
                            {% else %}
                                <option>{{ item }}</option>
                            {%- endif %}
                        {%- endfor %}
                    </select>
            </form>
            <div id="mychart"></div>
        </div>
       <script>
            filepath = document.getElementById('comp0_select').value;
            var file1 = 'static/task/'+filepath+'/AvgLoss.json'
            console.log(file1)
            $.ajax({
                    cache:false,
                    url:file1,
                    success: function(){
                        $.getJSON(file1, function (externaldata) {
                            console.log(externaldata)
                            if (is_first==true){
                                chart = c3.generate({
                                    title: {
                                        text:'External JSON loading via C3.js'
                                    },
                                    bindto: '#mychart',
                                    data: {
                                        json: externaldata,
                                        type: 'area-spline',
                                    }
                                });
                            }
                            $.getJSON(file1, function (externaldata) {
                                chart.load({ json: externaldata} )
                                chart.flush();
                            });
                        })
                    },
                });
       </script>

        <style>
            a.list-group-item{
                font-size: 24px;
            }
        </style>
    </body>
</html>